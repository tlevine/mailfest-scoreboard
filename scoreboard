#!/usr/bin/env python3
import sys, os
import getpass

import feed
import stats

CREDENTIALS = {
    'host': os.environ.get('MAILFEST_IMAP_HOST', 'mail.gandi.net'),
    'address': os.environ.get('MAILFEST_ADDRESS', 'mailfest@thomaslevine.com'),
}
CREDENTIALS['password'] = os.environ.get('MAILFEST_PASSWORD',
     getpass.getpass('Password for %s:' % CREDENTIALS['address']))


email = None
stat_names = filter(lambda x: not x.startswith('_'), dir(stats))
email_stats = {stat: getattr(stats, stat)(email) for stat in stat_names}
print(email_stats)
